{% extends 'core/base.html' %}

{% block main %}
<div class="container mx-auto py-12 px-6">
    <h1 class="text-4xl font-extrabold text-orange-600 text-center mb-8">üçΩÔ∏è ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</h1>

    {% if recommendations %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for food in recommendations %}
        <div class="bg-white shadow-lg rounded-lg overflow-hidden border border-gray-200 transition transform hover:scale-105">
            <div class="h-56 w-full bg-gray-100 flex items-center justify-center">
                {% if food.image %}
                <img src="{{ food.image.url }}" alt="{{ food.name }}" class="w-full h-full object-cover">
                {% else %}
                <span class="text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</span>
                {% endif %}
            </div>
            <div class="p-6 text-center">
                <h2 class="text-2xl font-bold text-orange-600 mb-2">{{ food.name }}</h2>
                <p class="text-lg font-semibold text-gray-800">üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤: {{ food.price }} ‡∏ö‡∏≤‡∏ó</p>

                <p class="text-md text-gray-600 mt-2">
                    üè† ‡∏£‡πâ‡∏≤‡∏ô:
                    <a href="{% url 'restaurant_detail' food.restaurant.id %}" class="text-blue-500 hover:underline">
                        {{ food.restaurant.name }}
                    </a>
                </p>

                <p class="text-md text-gray-600 mt-2">
                    ‚≠ê ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢:
                    {% with food.restaurant.review_set.aggregate_avg.rating as avg_rating %}
                        {% if avg_rating %}
                            {{ avg_rating|floatformat:1 }}/5
                        {% else %}
                            <span class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</span>
                        {% endif %}
                    {% endwith %}
                </p>

                <p class="text-gray-700 text-md mt-2">
                    üçΩÔ∏è ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:
                    {% for cat in food.category.all %}
                        {{ cat.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </p>

                <a href="{% url 'food_detail' food.id %}" class="mt-4 inline-block bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg shadow-lg font-semibold transition-transform transform hover:scale-105">
                    ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                </a>

                <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Feedback -->
                <form method="post" action="{% url 'feedback_food' food.id %}" class="mt-4">
                    {% csrf_token %}
                    <button type="submit" name="action" value="like" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-semibold transition-transform transform hover:scale-110">
                        üëç ‡∏ä‡∏≠‡∏ö
                    </button>
                    <button type="submit" name="action" value="dislike" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition-transform transform hover:scale-110">
                        üëé ‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-gray-500 text-center">‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô</p>
    {% endif %}
</div>
{% endblock %}
